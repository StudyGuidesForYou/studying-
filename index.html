<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Class Code Portal</title>

<style>
    body {
        margin: 0;
        background: #0d1526;
        font-family: 'Inter', sans-serif;
        color: white;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
    }

    /* Fade animation */
    .fade-out {
        opacity: 0;
        transform: scale(0.97);
        transition: 0.5s ease;
    }

    /* CLASS CODE CARD */
    #code-screen {
        background: rgba(20, 30, 50, 0.5);
        padding: 40px;
        border-radius: 20px;
        width: 650px;
        text-align: center;
        box-shadow: 0 15px 35px rgba(0,0,0,0.4);
        backdrop-filter: blur(25px);
        transition: 0.3s ease;
    }

    #code-screen h1 {
        font-size: 32px;
        font-weight: 700;
        margin-bottom: 10px;
    }

    .code-inputs {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin: 20px 0;
    }

    .box {
        width: 55px;
        height: 70px;
        background: #0d1320;
        border-radius: 10px;
        border: 2px solid transparent;
        text-align: center;
        font-size: 32px;
        font-weight: 600;
        outline: none;
        color: white;
        transition: 0.25s ease;
    }

    .box:focus {
        border-color: #2d65ff;
        box-shadow: 0 0 12px #2d65ff88;
    }

    /* Buttons */
    .btn {
        background: #1f2a44;
        padding: 10px 18px;
        border-radius: 10px;
        border: none;
        margin: 8px;
        cursor: pointer;
        color: white;
        font-size: 15px;
        transition: 0.25s ease;
    }

    .btn:hover {
        background: #2c3a5c;
    }

    .enter-btn {
        background: #2d65ff;
        box-shadow: 0 0 12px #2d65ff66;
    }

    .enter-btn:hover {
        background: #3c79ff;
    }

    /* Shake animation for incorrect */
    @keyframes shake {
        0% { transform: translateX(0); }
        25% { transform: translateX(-6px); }
        50% { transform: translateX(6px); }
        75% { transform: translateX(-6px); }
        100% { transform: translateX(0); }
    }

    /* SUCCESS SCREEN */
    #app-screen {
        display: none;
        flex-direction: column;
        align-items: center;
        width: 100%;
        height: 100%;
        padding-top: 40px;
    }

    #url-bar {
        width: 70%;
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }

    #url-input {
        flex: 1;
        padding: 14px;
        border-radius: 12px;
        border: none;
        outline: none;
        font-size: 17px;
        background: #151e30;
        color: white;
    }

    #load-btn {
        background: #2d65ff;
        border: none;
        padding: 14px 22px;
        border-radius: 12px;
        cursor: pointer;
        color: white;
        font-size: 17px;
        box-shadow: 0 0 10px #2d65ff66;
    }

    #iframe-container {
        width: 95%;
        height: 90%;
        border-radius: 20px;
        overflow: hidden;
        background: black;
    }

    iframe {
        width: 100%;
        height: 100%;
        border: none;
    }
</style>
</head>
<body>

<!-- ✅ CLASS CODE SCREEN -->
<div id="code-screen">
    <h1>Class code?</h1>
    <p>Enter the 5-letter code</p>

    <div class="code-inputs">
        <input maxlength="1" class="box">
        <input maxlength="1" class="box">
        <input maxlength="1" class="box">
        <input maxlength="1" class="box">
        <input maxlength="1" class="box">
    </div>

    <button class="btn" onclick="pasteCode()">Paste</button>
    <button class="btn" onclick="clearCode()">Clear</button>
    <button class="btn enter-btn" onclick="submitCode()">Enter</button>

    <p id="status" style="margin-top:15px; font-size:18px;"></p>
</div>

<!-- ✅ APP SCREEN -->
<div id="app-screen">
    <div id="url-bar">
        <input id="url-input" placeholder="Enter URL… (example: https://example.com)">
        <button id="load-btn" onclick="loadSite()">Go</button>
    </div>

    <div id="iframe-container">
        <iframe id="frame"></iframe>
    </div>
</div>

<script>
const inputs = document.querySelectorAll('.box');
const statusText = document.getElementById("status");

inputs.forEach((box, index) => {
    box.addEventListener("input", () => {
        if (box.value.length === 1 && index < inputs.length - 1) {
            inputs[index + 1].focus();
        }
    });
});

function getCode() {
    return Array.from(inputs).map(i => i.value.toLowerCase()).join("");
}

function clearCode() {
    inputs.forEach(i => i.value = "");
    inputs[0].focus();
}

async function pasteCode() {
    let text = await navigator.clipboard.readText();
    text = text.toLowerCase().replace(/[^a-z]/g, "").slice(0,5);
    for (let i = 0; i < text.length; i++) inputs[i].value = text[i];
}

function submitCode() {
    const code = getCode();

    if (code !== "sigma") {
        statusText.innerText = "Incorrect code";
        statusText.style.color = "#ff5757";
        document.getElementById("code-screen").style.animation = "shake 0.4s";
        setTimeout(() => {
            document.getElementById("code-screen").style.animation = "";
        }, 400);
        return;
    }

    // ✅ Correct code
    statusText.innerText = "Correct!";
    statusText.style.color = "#4d9cff";

    // Fade animation
    const screen = document.getElementById("code-screen");
    screen.classList.add("fade-out");

    setTimeout(() => {
        screen.style.display = "none";
        document.getElementById("app-screen").style.display = "flex";
    }, 500);
}

function loadSite() {
    let url = document.getElementById("url-input").value.trim();

    if (!url.startsWith("http://") && !url.startsWith("https://")) {
        url = "https://" + url;
    }

    document.getElementById("frame").src = url;
}
</script>

</body>
</html>
