<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aurora ‚Äî Web OS</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Interact.js for drag/resize -->
<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>

<!-- xterm.js -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css" />
<script src="https://cdn.jsdelivr.net/npm/xterm/lib/xterm.js"></script>

<style>
:root{
  --bg1: linear-gradient(135deg,#0f172a 0%, #021025 60%, #052b36 100%);
  --glass: rgba(255,255,255,0.06);
  --glass-2: rgba(255,255,255,0.04);
  --accent: #7c5cff;
  --accent-2: #00e5ff;
  --radius: 14px;
}
html,body,#root{height:100%;}
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  background:var(--bg1);
  overflow:hidden;
}
#wallpaper{position:fixed; inset:0; background-position:center; background-size:cover; filter:blur(0.3px) saturate(1.05); transition: background 1s;}
#desktop{position:absolute; inset:0; padding:24px; display:flex; flex-wrap:wrap; gap:18px; align-content:flex-start;}
.desk-icon{width:84px;text-align:center;color:white;cursor:pointer;user-select:none;transition:all 0.2s}
.desk-icon img{width:64px;height:64px;border-radius:16px;box-shadow:0 4px 20px rgba(2,6,23,0.6);}
.desk-icon span{display:block;margin-top:6px;font-size:13px;max-width:84px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.desk-icon:hover{transform:scale(1.05);}

/* Taskbar */
#taskbar{
  position:fixed;left:0;right:0;bottom:0;height:56px;padding:6px 18px;display:flex;align-items:center;gap:12px;
  background:linear-gradient(180deg, rgba(8,10,15,0.18), rgba(8,10,15,0.28));backdrop-filter: blur(8px);
  border-top: 1px solid rgba(255,255,255,0.03);
  z-index:1000;
}
#start-button{
  width:44px;height:44px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  display:flex;align-items:center;justify-content:center;color:white;font-weight:600;cursor:pointer;
  box-shadow:0 6px 22px rgba(2,6,23,0.6);
}
#taskbar .pinned {display:flex;gap:8px;align-items:center}
.tb-btn{height:40px;min-width:40px;padding:6px;border-radius:10px;background:transparent;border:none;cursor:pointer;color:white;display:flex;align-items:center;justify-content:center}
.tb-btn:hover{background:rgba(255,255,255,0.03)}

/* Window style */
.aurora-window{position:absolute;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;box-shadow:0 20px 50px rgba(2,6,23,0.7);overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
.win-title{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);backdrop-filter: blur(3px);cursor:move}
.win-title .left{display:flex;gap:8px;align-items:center;font-weight:600}
.win-controls button{margin-left:6px;border-radius:8px;width:32px;height:28px;background:transparent;border:0;color:white;cursor:pointer;font-size:16px}
.win-body{height:calc(100% - 44px);background:transparent;overflow:auto;padding:8px}

/* Start Menu */
#start-menu{position:fixed;left:50%;transform:translateX(-50%);bottom:72px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:16px;padding:14px;width:760px;box-shadow:0 30px 70px rgba(2,6,23,0.7);display:flex;gap:14px;color:white;z-index:1000}
.start-left{width:46%}
.start-right{width:54%;display:flex;flex-direction:column;gap:8px}
.app-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.app-card{display:flex;align-items:center;gap:10px;padding:8px;border-radius:10px;cursor:pointer;transition:all 0.15s}
.app-card:hover{background:rgba(255,255,255,0.02);transform:scale(1.02)}

/* Context menu */
.ctx{position:fixed;background:#0b1220;color:white;border-radius:8px;padding:8px;box-shadow:0 10px 30px rgba(2,6,23,0.6);display:none;z-index:9999}
.ctx button{display:block;width:100%;text-align:left;padding:6px;border-radius:6px;background:transparent;border:0;color:white;cursor:pointer}

/* helpers */
.muted{color:rgba(255,255,255,0.6);font-size:13px}
.icon-small{width:22px;height:22px;border-radius:6px}
textarea,input{background:rgba(255,255,255,0.05);color:white;border:none;border-radius:8px;padding:6px;font-family:inherit;}
button{cursor:pointer;}
</style>
</head>
<body>

<div id="wallpaper"></div>
<div id="desktop" oncontextmenu="return false;"></div>

<div id="start-menu" style="display:none" aria-hidden="true">
  <div class="start-left">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:10px">
      <div style="width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:700">A</div>
      <div>
        <div style="font-weight:700;font-size:16px">Aurora</div>
        <div class="muted">Welcome back ‚Äî ready to explore?</div>
      </div>
    </div>
    <div style="margin-top:8px" class="muted">Pinned</div>
    <div id="pinned-grid" class="app-grid" style="margin-top:8px"></div>
  </div>
  <div class="start-right">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-weight:700">All apps</div>
      <input id="start-search" placeholder="Search apps..." />
    </div>
    <div id="all-apps" style="overflow:auto;height:420px;margin-top:8px"></div>
  </div>
</div>

<div id="taskbar">
  <div id="start-button" title="Start (press Win or click)">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
      <path d="M3 3h4v4H3V3zM9 3h6v4H9V3zM15 3h6v4h-6V3zM3 9h4v6H3V9zM9 9h6v6H9V9zM15 9h6v6h-6V9zM3 15h4v6H3v-6zM9 15h6v6H9v-6zM15 15h6v6h-6v-6z" fill="white"/>
    </svg>
  </div>
  <div class="pinned" id="taskbar-pinned"></div>
  <div style="flex:1"></div>
  <div style="display:flex;gap:10px;align-items:center;color:white">
    <div id="tray-wifi" class="muted">Aurora</div>
    <div id="tray-time" class="muted"></div>
    <div id="tray-settings" style="width:40px;height:40px;border-radius:8px;background:transparent;display:flex;align-items:center;justify-content:center;cursor:pointer">‚öôÔ∏è</div>
  </div>
</div>

<div id="ctx-menu" class="ctx" role="menu">
  <button onclick="createNewFile()">New text file</button>
  <button onclick="refreshDesktop()">Refresh</button>
  <button onclick="openSettings()">Change wallpaper</button>
</div>

<div id="windows-root"></div>

<script>
/* ---------- Apps Definition ---------- */
const APPS=[
  {id:'notepad',name:'Notepad',icon:'üìù',type:'app',run:notepadApp},
  {id:'calculator',name:'Calculator',icon:'üßÆ',type:'app',run:calculatorApp},
  {id:'paint',name:'Paint',icon:'üé®',type:'app',run:paintApp},
  {id:'terminal',name:'Terminal',icon:'üíª',type:'app',run:terminalApp},
  {id:'files',name:'Files',icon:'üìÅ',type:'app',run:filesApp},
  {id:'settings',name:'Settings',icon:'‚öôÔ∏è',type:'app',run:settingsApp},
  {id:'photos',name:'Photos',icon:'üñºÔ∏è',type:'app',run:photosApp},
  {id:'music',name:'Music',icon:'üéµ',type:'app',run:musicApp},
  {id:'browser',name:'Browser',icon:'üåê',type:'app',run:browserApp},
  
  // Web apps
  {id:'DayDreamX', name:'DayDreamX', icon:'üí≠', type:'web', url:'https://study.info.north-kazakhstan.su.cdn.cloudflare.net/'},
  {id:'Velera', name:'Velera', icon:'üöÄ', type:'web', url:'https://zearn.buzz.cdn.cloudflare.net/'},
  {id:'Truffled', name:'Truffled', icon:'üçÑ', type:'web', url:'https://truffled.example/'},
  {id:'PeteZah', name:'PeteZah', icon:'üêæ', type:'web', url:'https://pete.example/'},
  {id:'UniUBv4', name:'UniUB v4', icon:'üéì', type:'web', url:'https://university.example/'},
  {id:'Rosin', name:'Rosin', icon:'ü™µ', type:'web', url:'https://lbbjwojcgm.antrak.org.tr/'},
  {id:'Nexus', name:'Nexus', icon:'üï∏Ô∏è', type:'web', url:'https://nexus-is.onthewifi.com/'},
  {id:'DogeUB', name:'DogeUB', icon:'üê∂', type:'web', url:'https://math.linked8.net/indev'},
  {id:'RammerHead', name:'RammerHead', icon:'üéß', type:'web', url:'https://geo.searchgpy.com/'},
  {id:'CBmagic', name:'CBmagic', icon:'‚ú®', type:'web', url:'https://soloo.fun/'},
  {id:'Axiom', name:'Axiom', icon:'üß©', type:'web', url:'https://ultralight.mwbread.com/'},
  {id:'Quasar', name:'Quasar', icon:'üåå', type:'web', url:'https://tuition.oneuniversity.info/'},
  {id:'Boredom', name:'Boredom', icon:'üòê', type:'web', url:'https://boredom.global.ssl.fastly.net/'},
  {id:'SomeStuff', name:'SomeStuff', icon:'üì¶', type:'web', url:'https://wmath.pages.dev/#prxy'},
  {id:'Galaxy', name:'Galaxy', icon:'üå†', type:'web', url:'https://frylight.jumpingcrab.com/'},
  {id:'Eldardo', name:'Eldardo', icon:'üõ∏', type:'web', url:'https://eldardo.net/app/'}
];

/* ---------- State ---------- */
const state={windows:[],z:100,pinned:JSON.parse(localStorage.getItem('aurora_pinned')||'["notepad","calculator","settings"]'),wallpaper:localStorage.getItem('aurora_wallpaper')||'',dark:true};
const desktop=document.getElementById('desktop');
const windowsRoot=document.getElementById('windows-root');
const startMenu=document.getElementById('start-menu');
const pinnedGrid=document.getElementById('pinned-grid');
const allAppsEl=document.getElementById('all-apps');
const taskbarPinned=document.getElementById('taskbar-pinned');
const trayTime=document.getElementById('tray-time');
const ctxMenu=document.getElementById('ctx-menu');
const wallpaperEl=document.getElementById('wallpaper');
const startSearch=document.getElementById('start-search');
const traySettings=document.getElementById('tray-settings');
<script>
/* ---------- Utility ---------- */
function findApp(id){return APPS.find(a=>a.id===id||a.name===id);}
function selectIcon(el){document.querySelectorAll('.desk-icon').forEach(d=>d.style.outline='none'); el.style.outline='2px solid rgba(255,255,255,0.06)'; setTimeout(()=>el.style.outline='none',1200);}

/* ---------- Desktop & Start Menu ---------- */
function renderDesktop(){
  desktop.innerHTML='';
  APPS.forEach(app=>{
    const el=document.createElement('div'); el.className='desk-icon'; el.title=app.name;
    el.innerHTML=`<div style="font-size:40px">${app.icon}</div><span>${app.name}</span>`;
    el.ondblclick=()=>openAppWindow(app); el.onclick=()=>selectIcon(el);
    desktop.appendChild(el);
  });
}

function renderStartMenu(){
  pinnedGrid.innerHTML=''; state.pinned.forEach(id=>{
    const app=findApp(id); if(!app) return;
    const card=document.createElement('div'); card.className='app-card'; card.innerHTML=`<span style="font-size:24px">${app.icon}</span> ${app.name}`;
    card.onclick=()=>openAppWindow(app); pinnedGrid.appendChild(card);
  });
  allAppsEl.innerHTML=''; APPS.forEach(app=>{
    const row=document.createElement('div'); row.className='app-card'; row.innerHTML=`<span style="font-size:24px">${app.icon}</span> ${app.name}`;
    row.onclick=()=>openAppWindow(app); allAppsEl.appendChild(row);
  });
}

/* ---------- Window Management ---------- */
function openAppWindow(app){
  const win=document.createElement('div'); win.className='aurora-window';
  const width=Math.min(window.innerWidth*0.7,600), height=Math.min(window.innerHeight*0.7,400);
  win.style.width=width+'px'; win.style.height=height+'px';
  win.style.left=(window.innerWidth-width)/2+'px';
  win.style.top=(window.innerHeight-height)/2+'px';
  win.style.zIndex=++state.z;

  win.innerHTML=`
    <div class="win-title">
      <div class="left"><span style="font-size:18px">${app.icon}</span> ${app.name}</div>
      <div class="win-controls">
        <button onclick="closeWindow(this)">‚úñ</button>
      </div>
    </div>
    <div class="win-body" id="win-body-${app.id}"></div>
  `;
  windowsRoot.appendChild(win);

  interact(win).draggable({
    allowFrom:'.win-title', listeners:{move:dragMoveListener}
  }).resizable({edges:{left:true,right:true,bottom:true,top:true},listeners:{move:resizeMoveListener}});

  state.windows.push({id:app.id,el:win});
  if(app.type==='app' && typeof app.run==='function') app.run(document.getElementById(`win-body-${app.id}`));
  else if(app.type==='web') document.getElementById(`win-body-${app.id}`).innerHTML=`<iframe src="${app.url}" style="width:100%;height:100%;border:none"></iframe>`;
}

function dragMoveListener(event){
  const target=event.target;
  const x=(parseFloat(target.getAttribute('data-x'))||0)+event.dx;
  const y=(parseFloat(target.getAttribute('data-y'))||0)+event.dy;
  target.style.transform=`translate(${x}px,${y}px)`;
  target.setAttribute('data-x',x); target.setAttribute('data-y',y);
}

function resizeMoveListener(event){
  const target=event.target;
  target.style.width=event.rect.width+'px';
  target.style.height=event.rect.height+'px';
  const x=(parseFloat(target.getAttribute('data-x'))||0)+event.deltaRect.left;
  const y=(parseFloat(target.getAttribute('data-y'))||0)+event.deltaRect.top;
  target.style.transform=`translate(${x}px,${y}px)`;
  target.setAttribute('data-x',x); target.setAttribute('data-y',y);
}

function closeWindow(btn){btn.closest('.aurora-window').remove();}

/* ---------- Apps Implementation ---------- */
function notepadApp(container){
  container.innerHTML=`<textarea style="width:100%;height:100%;resize:none" placeholder="Type your notes here..."></textarea>`;
}

function calculatorApp(container){
  container.innerHTML=`
    <div style="display:flex;flex-direction:column;height:100%">
      <input type="text" id="calc-display" style="flex:none;padding:8px;font-size:20px" disabled />
      <div style="display:grid;grid-template-columns:repeat(4,1fr);flex:1;gap:4px;margin-top:4px">
        ${['7','8','9','/','4','5','6','*','1','2','3','-','0','.','=','+'].map(v=>`<button onclick="calcPress('${v}')">${v}</button>`).join('')}
      </div>
    </div>
  `;
  window.calcVal='';
  window.calcPress=function(val){
    if(val==='='){try{window.calcVal=eval(window.calcVal);}catch{window.calcVal='Error'}}
    else window.calcVal+=val;
    document.getElementById('calc-display').value=window.calcVal;
  }
}

function paintApp(container){
  const canvas=document.createElement('canvas'); canvas.width=container.clientWidth; canvas.height=container.clientHeight;
  canvas.style.background='white'; container.appendChild(canvas);
  const ctx=canvas.getContext('2d'); let painting=false;
  canvas.onmousedown=e=>painting=true;
  canvas.onmouseup=e=>{painting=false; ctx.beginPath();}
  canvas.onmousemove=e=>{if(!painting) return; ctx.lineTo(e.offsetX,e.offsetY); ctx.stroke(); ctx.beginPath(); ctx.moveTo(e.offsetX,e.offsetY);}
}

function terminalApp(container){
  const term=new Terminal(); term.open(container); term.write('Aurora Terminal\r\n$ ');
}

function filesApp(container){container.innerHTML=`<div>File manager not implemented yet.</div>`;}
function settingsApp(container){container.innerHTML=`<div>Settings panel not implemented yet.<br><button onclick="changeWallpaper()">Change Wallpaper</button></div>`;}
function photosApp(container){container.innerHTML=`<div>Photos viewer not implemented yet.</div>`;}
function musicApp(container){container.innerHTML=`<div>Music player not implemented yet.</div>`;}
function browserApp(container){container.innerHTML=`<div>Browser app not implemented yet.</div>`;}

/* ---------- Settings Function ---------- */
function openSettings(){openAppWindow(findApp('settings'));}
function changeWallpaper(){
  const url=prompt('Enter wallpaper URL:');
  if(url){wallpaperEl.style.backgroundImage=`url(${url})`; localStorage.setItem('aurora_wallpaper',url);}
}

/* ---------- Desktop Right Click ---------- */
desktop.addEventListener('contextmenu',e=>{
  e.preventDefault();
  ctxMenu.style.left=e.clientX+'px';
  ctxMenu.style.top=e.clientY+'px';
  ctxMenu.style.display='block';
});
document.addEventListener('click',()=>ctxMenu.style.display='none');

/* ---------- Start Menu ---------- */
document.getElementById('start-button').addEventListener('click',()=>{startMenu.style.display=startMenu.style.display==='none'?'flex':'none';});
startSearch.addEventListener('input',()=>{ 
  const val=startSearch.value.toLowerCase();
  Array.from(allAppsEl.children).forEach(c=>{
    c.style.display=c.textContent.toLowerCase().includes(val)?'flex':'none';
  });
});

/* ---------- Taskbar Settings Button ---------- */
traySettings.addEventListener('click',openSettings);

/* ---------- Time Tray ---------- */
function updateTrayTime(){const d=new Date(); trayTime.textContent=d.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});}
setInterval(updateTrayTime,1000); updateTrayTime();

/* ---------- Animated Wallpaper ---------- */
let hue=0; function animateWallpaper(){hue=(hue+0.1)%360; wallpaperEl.style.backgroundImage=`radial-gradient(circle at 10% 20%, hsla(${hue},50%,40%,0.18), transparent 10%), radial-gradient(circle at 80% 80%, hsla(${(hue+90)%360},60%,50%,0.06), transparent 10%), linear-gradient(135deg,#021025 0%, #052b36 100%)`; requestAnimationFrame(animateWallpaper);}
animateWallpaper();

/* ---------- Initialization ---------- */
renderDesktop();
renderStartMenu();
if(state.wallpaper) wallpaperEl.style.backgroundImage=`url(${state.wallpaper})`;

</script>
